//! Sample data invoking the worst-case scenario.

#[macro_use]
extern crate bencher;
extern crate lexical_core;

use bencher::{black_box, Bencher};
use lexical_core::atof::*;

// F64

// Rust fails to parse this, so we need to use it only with Lexical.
const F64_DATA: [&'static str; 12] = [
    // Force the slow algorithm.
    "8.98846567e307",
    "8.988465674311580536e307",
    "8.9884656743115805365666807213e307",
    "8.98846567431158053656668072130502949627e307",
    "8.988465674311580536566680721305029496276241413130e307",
    "8.98846567431158053656668072130502949627624141313081589739713427561540454154866937524136980060240969e307",
    "8.988465674311580536566680721305029496276241413130815897397134275615404541548669375241369800602409693534988440311420212554162910536968453110861365728770536588474293813658984423817947455605142964741514e307",
    "8.98846567431158053656668072130502949627624141313081589739713427561540454154866937524136980060240969353498844031142021255416291053696845311086136572877053658847429381365898442381794745560514296474151486978574387976858590638908514073910088308747655630259515975825139366555781573480200663642101543165321617080320000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e307",
    "8.988465674311580536566680721305029496276241413130815897397134275615404541548669375241369800602409693534988440311420212554162910536968453110861365728770536588474293813658984423817947455605142964741514869785743879768585906389085140739100883087476556302595159758251393665557815734802006636421015431653216170803200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e307",
    "8.98846567431158053656668072130502949627624141313081589739713427561540454154866937524136980060240969353498844031142021255416291053696845311086136572877053658847429381365898442381794745560514296474151486978574387976858590638908514073910088308747655630259515975825139366555781573480200663642101543165321617080320000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e307",
    "8.988465674311580536566680721305029496276241413130815897397134275615404541548669375241369800602409693534988440311420212554162910536968453110861365728770536588474293813658984423817947455605142964741514869785743879768585906389085140739100883087476556302595159758251393665557815734802006636421015431653216170803200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e307",
    "8.98846567431158053656668072130502949627624141313081589739713427561540454154866937524136980060240969353498844031142021255416291053696845311086136572877053658847429381365898442381794745560514296474151486978574387976858590638908514073910088308747655630259515975825139366555781573480200663642101543165321617080320000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e307",
];

fn atof_large_stress_f64_lexical(bench: &mut Bencher) {
    bench.iter(|| { F64_DATA.iter().for_each(|x| { black_box(atof64_slice(10, x.as_bytes())); } ) })
}

fn atof_large_stress_f64_lexical_lossy(bench: &mut Bencher) {
    bench.iter(|| { F64_DATA.iter().for_each(|x| { black_box(atof64_lossy_slice(10, x.as_bytes())); } ) })
}

// LEXICAL SPECIFIC SIZES

fn atof_large_stress_f64_lexical_10(bench: &mut Bencher) {
    bench.iter(|| { black_box(atof64_slice(10, F64_DATA[0].as_bytes())); })
}

fn atof_large_stress_f64_lexical_20(bench: &mut Bencher) {
    bench.iter(|| { black_box(atof64_slice(10, F64_DATA[1].as_bytes())); })
}

fn atof_large_stress_f64_lexical_30(bench: &mut Bencher) {
    bench.iter(|| { black_box(atof64_slice(10, F64_DATA[2].as_bytes())); })
}

fn atof_large_stress_f64_lexical_40(bench: &mut Bencher) {
    bench.iter(|| { black_box(atof64_slice(10, F64_DATA[3].as_bytes())); })
}

fn atof_large_stress_f64_lexical_50(bench: &mut Bencher) {
    bench.iter(|| { black_box(atof64_slice(10, F64_DATA[4].as_bytes())); })
}

fn atof_large_stress_f64_lexical_100(bench: &mut Bencher) {
    bench.iter(|| { black_box(atof64_slice(10, F64_DATA[5].as_bytes())); })
}

fn atof_large_stress_f64_lexical_200(bench: &mut Bencher) {
    bench.iter(|| { black_box(atof64_slice(10, F64_DATA[6].as_bytes())); })
}

fn atof_large_stress_f64_lexical_400(bench: &mut Bencher) {
    bench.iter(|| { black_box(atof64_slice(10, F64_DATA[7].as_bytes())); })
}

fn atof_large_stress_f64_lexical_800(bench: &mut Bencher) {
    bench.iter(|| { black_box(atof64_slice(10, F64_DATA[8].as_bytes())); })
}

fn atof_large_stress_f64_lexical_1600(bench: &mut Bencher) {
    bench.iter(|| { black_box(atof64_slice(10, F64_DATA[9].as_bytes())); })
}

fn atof_large_stress_f64_lexical_3200(bench: &mut Bencher) {
    bench.iter(|| { black_box(atof64_slice(10, F64_DATA[10].as_bytes())); })
}

fn atof_large_stress_f64_lexical_6400(bench: &mut Bencher) {
    bench.iter(|| { black_box(atof64_slice(10, F64_DATA[11].as_bytes())); })
}

// PARSE SPECIFIC SIZES

fn atof_large_stress_f64_parse_10(bench: &mut Bencher) {
    bench.iter(|| { black_box(F64_DATA[0].parse::<f64>().unwrap()); })
}

fn atof_large_stress_f64_parse_20(bench: &mut Bencher) {
    bench.iter(|| { black_box(F64_DATA[1].parse::<f64>().unwrap()); })
}

fn atof_large_stress_f64_parse_30(bench: &mut Bencher) {
    bench.iter(|| { black_box(F64_DATA[2].parse::<f64>().unwrap()); })
}

fn atof_large_stress_f64_parse_40(bench: &mut Bencher) {
    bench.iter(|| { black_box(F64_DATA[3].parse::<f64>().unwrap()); })
}

fn atof_large_stress_f64_parse_50(bench: &mut Bencher) {
    bench.iter(|| { black_box(F64_DATA[4].parse::<f64>().unwrap()); })
}

fn atof_large_stress_f64_parse_100(bench: &mut Bencher) {
    bench.iter(|| { black_box(F64_DATA[5].parse::<f64>().unwrap()); })
}

fn atof_large_stress_f64_parse_200(bench: &mut Bencher) {
    bench.iter(|| { black_box(F64_DATA[6].parse::<f64>().unwrap()); })
}

fn atof_large_stress_f64_parse_400(bench: &mut Bencher) {
    bench.iter(|| { black_box(F64_DATA[7].parse::<f64>().unwrap()); })
}

fn atof_large_stress_f64_parse_800(bench: &mut Bencher) {
    bench.iter(|| { black_box(F64_DATA[8].parse::<f64>().unwrap()); })
}

fn atof_large_stress_f64_parse_1600(bench: &mut Bencher) {
    bench.iter(|| { black_box(F64_DATA[9].parse::<f64>().unwrap()); })
}

fn atof_large_stress_f64_parse_3200(bench: &mut Bencher) {
    bench.iter(|| { black_box(F64_DATA[10].parse::<f64>().unwrap()); })
}

fn atof_large_stress_f64_parse_6400(bench: &mut Bencher) {
    bench.iter(|| { black_box(F64_DATA[11].parse::<f64>().unwrap()); })
}

benchmark_group!(f64_benches, atof_large_stress_f64_lexical, atof_large_stress_f64_lexical_lossy);
benchmark_group!(f64_lexical_size_benches, atof_large_stress_f64_lexical_10, atof_large_stress_f64_lexical_20, atof_large_stress_f64_lexical_30, atof_large_stress_f64_lexical_40, atof_large_stress_f64_lexical_50, atof_large_stress_f64_lexical_100, atof_large_stress_f64_lexical_200, atof_large_stress_f64_lexical_400, atof_large_stress_f64_lexical_800, atof_large_stress_f64_lexical_1600, atof_large_stress_f64_lexical_3200, atof_large_stress_f64_lexical_6400);
benchmark_group!(f64_parse_size_benches, atof_large_stress_f64_parse_10, atof_large_stress_f64_parse_20, atof_large_stress_f64_parse_30, atof_large_stress_f64_parse_40, atof_large_stress_f64_parse_50, atof_large_stress_f64_parse_100, atof_large_stress_f64_parse_200, atof_large_stress_f64_parse_400, atof_large_stress_f64_parse_800, atof_large_stress_f64_parse_1600, atof_large_stress_f64_parse_3200, atof_large_stress_f64_parse_6400);
benchmark_main!(f64_benches, f64_lexical_size_benches, f64_parse_size_benches);
