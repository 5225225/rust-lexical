sudo: false

language: rust

matrix:
  include:
    - rust: stable
    - rust: beta

    - rust: nightly
      script:
        - cargo build
        - cargo test
        - cd lexical-core
        - cargo test
        - cargo test --no-default-features
        - cargo test --no-default-features --features=table
        - cargo test --no-default-features --features=table,radix
        - cargo test --no-default-features --features=grisu3
        - cargo test --no-default-features --features=ryu
        - cargo test --no-default-features --features=algorithm_m
        - cargo test --no-default-features --features=algorithm_m,radix
        - cargo test --no-default-features --features=correct
        - cargo test --no-default-features --features=correct,radix
        - cd ..
        - cargo bench --verbose --no-run

script:
  - cargo build
  - cargo test
  - cd lexical-core
  - cargo test
  - cargo test --no-default-features --features=std
  - cargo test --no-default-features --features=std,table
  - cargo test --no-default-features --features=std,table,radix
  - cargo test --no-default-features --features=std,grisu3
  - cargo test --no-default-features --features=std,ryu
  - cargo test --no-default-features --features=std,algorithm_m
  - cargo test --no-default-features --features=std,algorithm_m,radix
  - cargo test --no-default-features --features=std,correct
  - cargo test --no-default-features --features=std,correct,radix
  - cd ..
  - cargo bench --verbose --no-run
